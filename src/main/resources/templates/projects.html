<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title data-th-text="#{MainPageTitle}">MainPageTitle</title>

  <link href='https://fonts.googleapis.com/css?family=Calibri' rel='stylesheet' type='text/css'/>
  <link href='https://fonts.googleapis.com/css?family=Exo' rel='stylesheet' type='text/css'/>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <link rel="stylesheet" data-th-href="@{css/main.css}" href="../static/css/main.css"/>
</head>

<body
    onload="if( (document.getElementById('setMessageModal').innerText) == 'ON')
      { document.getElementById('setMessageModal').click(); }"
>

<div class="container">
  <header>
    <p data-th-text="#{MainPageTitle}">headerText</p>
  </header>
  <nav class="navbar bg-light navbar-light" style="padding-left:1rem">
    <a class="navbar-brand">Projektek listája</a>
    <a class="btn btn-outline-secondary" data-th-href="@{/}">
      <img data-th-src="@{icons/back.svg}" src="../static/icons/back.svg" width="20" alt="" class="mb-1"/>
      <span>Főmenü</span>
    </a>
  </nav>

  <div class="container p-3">
    <!-- Header -->
    <div class="row mb-2">
      <div class="col col-lg-1 text-center text-decoration-underline">
        <span>ID</span>
      </div>
      <div class="col col-lg-2 text-center text-decoration-underline">
        <span>Név</span>
      </div>
      <div class="col col-lg-7 text-center text-decoration-underline">
        <span>Leírás</span>
      </div>
      <div class="col col-lg-2 text-center text-decoration-underline">
        <span>Műveletek</span>
      </div>
    </div>
    <article data-th-each="project : ${projectsList}">
      <!-- Data -->
      <div class="row">
        <div style="text-align:right" class="col col-lg-1 border">
          <span data-th-text="${project.id}">ID</span>
        </div>
        <div class="col col-lg-2 border">
          <span data-th-text="${project.name}">Név</span>
        </div>
        <div class="col col-lg-7 border">
          <span data-th-text="${project.description}">Leírás</span>
        </div>
        <!-- Function icons -->
        <div class="col col-lg-2 border" style="text-align:center">
          <a class="btn btn-sm p-1 btn-outline-light"
                  data-bs-toggle="tooltip" data-bs-placement="top" title="Fejlesztők">
            <img data-th-src="@{~/icons/developers.svg}" src="../static/icons/developers.svg" width="20" alt=""
                 data-th-onclick="'setFields( ' + #{DEVELOPERS} + ',' + ${project.id} + ')'" />
          </a>
          <a class="btn btn-sm p-1 btn-outline-light"
                  data-bs-toggle="tooltip" data-bs-placement="top" title="Feladatok">
            <img data-th-src="@{~/icons/tasks.svg}" src="../static/icons/tasks.svg" width="20" alt=""
                 data-th-onclick="'setFields( ' + #{TASKS} + ',' + ${project.id} + ')'" />
          </a>
          <a class="btn btn-sm p-1 btn-outline-light"
                  data-bs-toggle="tooltip" data-bs-placement="top" title="Módosítás, törlés">
            <img data-th-src="@{~/icons/modify.svg}" src="../static/icons/modify.svg" width="20" alt=""
                 data-th-onclick="'setFields( ' + #{MODIFY} + ',' + ${project.id} + ')'" />
          </a>
        </div>
      </div>
    </article>

    <script>
      function setFields( operation, projectId) {
          document.getElementById("operation").setAttribute('value', operation );
          document.getElementById("projectId").setAttribute('value', projectId );
          document.getElementById("submit_button").click();
      }
    </script>

    <form hidden data-th-action="@{/selectProjectOperation}" data-th-object="${selectedOperation}">
      <label for="operation"></label>
      <input type="number" class="form-control" id="operation" name="operation">
      <label for="projectId"></label>
      <input type="number" class="form-control" id="projectId" name="projectId">
      <button id="submit_button"></button>
    </form>

  </div>
  <a class="btn btn-outline-secondary" data-th-href="@{'/project_new_start'}">
    <img data-th-src="@{icons/new.svg}" src="../static/icons/new.svg" width="20" alt="" class="mb-1"/>
    <span>Új projekt</span>
  </a>

  <footer class="mt-3">
    <p data-th-text="#{footerText}">footerText</p>
  </footer>

  <!-- Modal window -->
  <section data-th-replace="~{common/error_modal_window::error_modal_window}"></section>

</div>

</body>
</html>